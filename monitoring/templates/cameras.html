<!-- templates/cameras.html -->
{% extends 'base.html' %}
{% block content %}
<div class="container mx-auto text-white">
  <h1 class="text-2xl font-bold mb-4">Cameras</h1>
  
  <button onclick="openModal()" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-4 rounded">
    + Add Camera
  </button>

  <div id="camera-list" class="mt-6 space-y-4">
    <!-- JS will inject camera cards here -->
  </div>
</div>

<!-- Modal -->
<div id="cameraModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 hidden z-50">
  <div class="bg-white p-6 rounded-md shadow-md text-black w-full max-w-md">
    <h2 class="text-xl font-bold mb-4">Add Camera</h2>
    <input type="text" id="cameraName" placeholder="Camera Name" class="w-full mb-2 px-3 py-2 border rounded" />
    <input type="text" id="rtspUrl" placeholder="RTSP URL" class="w-full mb-4 px-3 py-2 border rounded" />
    <div class="flex justify-end">
      <button onclick="closeModal()" class="mr-2 bg-gray-400 px-4 py-2 rounded">Cancel</button>
      <button onclick="submitCamera()" class="bg-yellow-500 px-4 py-2 rounded font-bold">Add</button>
    </div>
  </div>
</div>

<!-- EDIT CAMERA MODAL -->
<div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
  <div class="bg-[#1f2937] text-white rounded-xl shadow-lg w-full max-w-md p-6">
    <h2 class="text-xl font-semibold mb-4">Edit Camera</h2>

    <form id="editCameraForm" method="POST">
      {% csrf_token %}
      <input type="hidden" id="editCameraId" name="camera_id">

      <label for="editCameraName" class="block mb-2 text-sm font-medium">Name</label>
      <input type="text" id="editCameraName" name="name" class="w-full px-4 py-2 bg-[#111827] border border-gray-700 rounded-lg mb-4" required>

      <label for="editCameraRTSP" class="block mb-2 text-sm font-medium">RTSP URL</label>
      <input type="text" id="editCameraRTSP" name="rtsp_url" class="w-full px-4 py-2 bg-[#111827] border border-gray-700 rounded-lg mb-6" required>

      <div class="flex justify-end gap-3">
        <button type="button" onclick="closeEditModal()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg">Cancel</button>
        <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-black font-semibold px-4 py-2 rounded-lg">Save</button>
      </div>
    </form>
  </div>
</div>
<script src="{% static 'js/cameras.js' %}"></script>

{% endblock %}
